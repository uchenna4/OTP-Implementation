# OTP-Implementation
A solution for One Time Password implementation using C# .NET Core
OTP Solution - Design and Implementation Plan

The solution is designed to be easily adaptable to diverse Web, Mobile, or IOT clients by use of API URI endpoints. 
All the Web API functions are executed asynchronously to avoid blocking of the client application. 
The solution utilizes a service-based architecture consisting of:
1.	OTPClasses, a class library with a class for generating the OTP. 
2.	OTPServices, a Web API with functions for requesting and validating the OTP. 
3.	OTPSessionDB an SQL database for OTP logging. It has a single table OTPSessions 

id	user			otp		issued
1	4242074052		39WH6L	2023-07-11 20:02:19.8400812
2	4242159475		0q9u6Z	2023-07-11 23:23:05.0271330
3	4242074052		CnWg06	2023-07-11 23:58:01.3916259

1.	OTPClasses
IOPTGene is an interface that defines generateToken(), a function that returns the OTP as a string. 
OPTGene is a class that implements the IOPTGene interface. It takes the OPT length as a constructor parameter.
generateToken() utilizes random selections of characters, but ensures the both alphabets and numbers are included even for very small codes.
generateToken() uses lower and uppercase alphabets and avoids duplicated characters or numbers.

2.	OTPServices
There are two Post methods:
The first is used to request an OTP. The user inputs a phone number, which will be used as an SMS text destination. The SMS text feature will be implemented by use of a service API in line with the philosophy of the solution. 

The Web API HttpPost method, otpCreate(), instantiates the OPTGene class with the desired OTP length and invokes generateToken().The creation of this class will ultimately be handled via dependency injection using IOPTGene. 

The Web API method, otpCreate(), assigns the OTPSession data object the generated OTP value as well as the date and timestamp of the OTP creation. These two data items are used subsequently when the OTP is validated. The user-supplied OTP for validation is compared to the server generated OTP stored in the OTPSessionDB. The timestamp at the time of OTP creation is used to calculate the age of the OTP.

The second Web API HttpPost method, otpValidate(), validates the user-supplied OTP with that generated by the server. If OTP exists, it computes its age and if it is within the OPT window the authentication is sealed. Otherwise, it is rejected. 

Final Considerations:
It would be prudent to monitor the OTP Session data stored in the database. The server session data can be stored in a list data structure (i.e., in-memory database) - and a background process can monitor the list of generated OTP’S and their corresponding ages. The OTP’S whose windows have elapsed can be continually deleted from the memory list and database. This will reduce the possibility of the OTP falling into the wrong hands as in the scenario where a user logs out sometime after receiving an OTP still within the OTP window.
Submission Notes:

I built my solution using Microsoft Visual Studio 2022. It consists of a .NET project with a class library for the OTP generation, and .NET Core Web API project. The OTP class library is included as a dependency in the Web API project. I used a framework called Swagger that consists of my UI for testing. It was input as a dependency. I utilized Microsoft .NET Core Entity Framework as ORM. My database was created using a code-first approach. Therefore, migrations have to be run through the console. I monitor my database using SQL Management Studio. Any other tool can be used. 


